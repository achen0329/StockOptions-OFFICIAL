<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Stock Information: Daily Adjusted (by Alpha Vantage) With Flask</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="{{ url_for('static', filename='style.css') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}">

</head>

<body>
    <div class="container">
        <h1>Stock Information: Daily Adjusted (by Alpha Vantage)</h1>

          <!-- Search and Reload Form -->
          <form method="post" style="display: inline;">
            <input type="text" name="search_symbol" placeholder="Enter Stock Symbol (e.g., AAPL)">
            <button type="submit">Search</button>
        </form>
        <form method="post" style="display: inline;">
            <button type="submit" name="reload" value="true">Reload All</button>
        </form>
        
         <!-- Historical Data Table -->
         {% if historical_data %}
         <h2>Historical Data for {{ historical_data['symbol'] }}</h2>
         <div class="table-1">
             <table>
                 <thead>
                     <tr>
                         <th>Date</th>
                         <th>Open</th>
                         <th>High</th>
                         <th>Low</th>
                         <th>Close</th>
                         <!-- No need for Current Price and Two Week Average in the header as they're not part of the loop -->
                     </tr>
                 </thead>
                 <tbody>
                     {% for date, data in historical_data['data'].items() %}
                         <tr>
                             <td>{{ date }}</td>
                             <td>{{ data['1. open'] }}</td>
                             <td>{{ data['2. high'] }}</td>
                             <td>{{ data['3. low'] }}</td>
                             <td>{{ data['4. close'] }}</td>
                         </tr>
                     {% endfor %}
                     <!-- Subheading for Summary Statistics -->
                    <tr class="summary-statistics-heading">
                        <td colspan="5">Summary Statistics</td>
                    </tr>
                     
                     
                     <tr>
                         <td colspan="4">Current Price</td>
                         <td>{{ historical_data['current_price'] }}</td>
                     </tr>
                     <tr>
                         <td colspan="4">Two Week Average</td>
                         <td>{{ historical_data['two_week_average'] }}</td>
                     </tr>
                 </tbody>
             </table>
         </div>
       
       

        {% elif stock_data_list %}
        <div class="table-1">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Symbol</th>
                        <th>Open</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Close</th>
                        <th>Current Price</th>
                        <th>Two Week Average</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% if not stock_data_list %}
                        <tr>
                            <td colspan="10">No Results or Invalid Symbol.</td>
                        </tr>
                    {% else %}
                        {% for stock in stock_data_list %}
                            <tr>
                                <td>{{ stock.date }}</td>
                                <td>{{ stock.symbol }}</td>
                                <td>{{ stock.open }}</td>
                                <td>{{ stock.high }}</td>
                                <td>{{ stock.low }}</td>
                                <td>{{ stock.close }}</td>
                                <td>{{ stock.current_price }}</td>
                                <td>{{ stock.two_week_average }}</td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                </tbody>
            </table>
        </div>

        {% else %}
            <!-- No data available -->
            <p>No results or invalid symbol.</p>
        {% endif %}
    </div>
</body>

</html>
